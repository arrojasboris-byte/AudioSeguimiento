<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SEGUIMIENTO AUDIO</title>
<style>
  :root{
    --rojo:#c82727;
    --rojo-osc:#a71f1f;
    --bg:#f6f7fb;
    --card:#ffffff;
    --shadow:0 8px 22px rgba(0,0,0,.08);

    /* Colores pastel por secci√≥n */
    --col-exclusivos:#fde2e4;   /* rosa claro */
    --col-flop:#e2f0cb;         /* verde claro */
    --col-visitas:#cde7f0;      /* azul claro */
    --col-formaciones:#f9e5c9;  /* naranja claro */
    --col-tele:#eadcf8;         /* lila claro */
  }
  html,body{height:100%;}
  body{
    margin:0;background:var(--bg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;color:#222;
  }

  /* Header */
  .topbar{
    position:sticky;top:0;z-index:3;
    display:flex;align-items:center;gap:.75rem;
    padding:.9rem 1rem;background:linear-gradient(180deg,var(--rojo),var(--rojo-osc));
    color:#fff;box-shadow:var(--shadow);
  }
  .brand{font-weight:800;letter-spacing:.5px;font-size:1.1rem}
  .spacer{flex:1}
  .btn{border:0;border-radius:999px;padding:.55rem .9rem;cursor:pointer;box-shadow:var(--shadow);font-weight:650}
  .btn:disabled{opacity:.6;cursor:not-allowed}
  .btn-lite{background:#fff;color:var(--rojo); }
  .btn-save{background:#fff;color:#a31212}
  .pill{display:inline-flex;align-items:center;gap:.45rem;background:#fff1; padding:.45rem .7rem;border-radius:999px;border:1px solid #fff3;font-weight:600}
  .pill.ok{background:#1fcc7b22;border-color:#1fcc7b55}
  .pill.lock{background:#ffd16622;border-color:#ffd16655}
  .ar{min-width:36px;height:36px;border-radius:10px;background:#fff;color:#b30000;font-weight:900;border:0;box-shadow:var(--shadow);cursor:pointer}
  .ts{opacity:.9;font-size:.9rem}

  /* Layout */
  .wrap{display:grid;grid-template-columns:330px 1fr;gap:1.25rem;padding:1.25rem;max-width:1400px;margin:0 auto}
  .col{background:transparent}
  .card{background:var(--card);border-radius:18px;box-shadow:var(--shadow);}

  /* Left column */
  .left .title{
    font-weight:900;font-size:1.15rem;padding:1rem 1.1rem;border-bottom:1px solid #eee;
  }
  .section{
    margin:1rem;border-radius:18px;overflow:hidden;border:1px solid #e9e9ef;background:#fff;
  }
  .sec-head{
    display:flex;align-items:center;justify-content:space-between;gap:.5rem;
    padding:.85rem 1rem;font-weight:900
  }
  .sec-head .tools{display:flex;gap:.4rem}
  .sec-btn{display:inline-flex;align-items:center;justify-content:center;width:38px;height:34px;border-radius:10px;border:0;box-shadow:var(--shadow);background:#fff;cursor:pointer}
  .sec-list{padding:.25rem .6rem .8rem .6rem}
  .item{
    display:flex;align-items:center;justify-content:space-between;gap:.6rem;
    background:#fff;border:1px solid #eee;border-radius:12px;padding:.7rem .8rem;margin:.55rem 0;cursor:pointer;
  }
  .item:hover{background:#fafafa}
  .item .name{font-weight:700}
  .item .acts{display:flex;gap:.35rem}
  .ico{font-size:18px;opacity:.75}
  .muted{opacity:.65}

  /* Right column (detalle) */
  .detail{padding:1.2rem 1.3rem 2rem 1.3rem;min-height:520px;border-radius:22px;border:1px solid #ececf5;background:#fff}
  .detail h2{margin:.2rem 0 0 0;font-size:1.2rem}
  .detail .hint{opacity:.7;margin:.2rem 0 1rem}
  .field{display:grid;gap:.35rem;margin:.7rem 0}
  .field label{font-weight:700;opacity:.9}
  .field input,.field textarea{
    border:1px solid #ddd;border-radius:12px;padding:.65rem .7rem;font-size:1rem;background:#fff;outline:none;
  }
  .field textarea{min-height:140px;resize:vertical}
  .bar-right{display:flex;justify-content:flex-end}
  .btn-ghost{background:#fff;border:1px solid #ddd;color:#444}
  .badge{display:inline-block;padding:.25rem .5rem;border-radius:999px;background:#00000010;font-size:.85rem}
  .row{display:flex;gap:1rem;align-items:center;flex-wrap:wrap}

  /* Pastel helpers to ‚Äúpintar‚Äù secciones y detalle */
  .bg-exclusivos{ background:var(--col-exclusivos);}
  .bg-flop{ background:var(--col-flop);}
  .bg-visitas{ background:var(--col-visitas);}
  .bg-formaciones{ background:var(--col-formaciones);}
  .bg-tele{ background:var(--col-tele);}
  .tone{border-color:#00000010}
  .tone .item{border-color:#00000010;background:#ffffffcc}

  @media (max-width:980px){
    .wrap{grid-template-columns:1fr;gap:1rem}
  }
</style>
</head>
<body>
  <!-- TOP BAR -->
  <header class="topbar">
    <button class="ar" title="AR" id="btnAR">AR</button>
    <div class="brand">SEGUIMIENTO AUDIO</div>
    <div class="spacer"></div>

    <button class="btn btn-lite" id="btnEdit">Editar</button>
    <button class="btn btn-lite" id="btnRefresh">Actualizar</button>
    <button class="btn btn-save" id="btnSaveTop">Guardar</button>

    <span class="pill ok" id="pillOk">‚úì Actualizado</span>
    <span class="pill ts" id="stamp">Actualizado: ‚Äî</span>
    <span class="pill lock" id="lock">üîì Editando</span>
  </header>

  <main class="wrap">
    <!-- LEFT -->
    <aside class="col left">
      <div class="card">
        <div class="title">SEGUIMIENTO</div>

        <section class="section bg-exclusivos tone" data-section="CENTROS EXCLUSIVOS" data-tone="exclusivos">
          <div class="sec-head">
            <div>üìí CENTROS EXCLUSIVOS <span class="badge muted">(m√°x. 10)</span></div>
            <div class="tools">
              <button class="sec-btn" data-act="toggle" title="Mostrar/Ocultar">‚ñæ</button>
              <button class="sec-btn" data-act="add" title="A√±adir">Ôºã</button>
            </div>
          </div>
          <div class="sec-list" role="list"></div>
        </section>

        <section class="section bg-flop tone" data-section="CENTROS FLOP" data-tone="flop">
          <div class="sec-head">
            <div>üìí CENTROS FLOP</div>
            <div class="tools">
              <button class="sec-btn" data-act="toggle" title="Mostrar/Ocultar">‚ñæ</button>
              <button class="sec-btn" data-act="add" title="A√±adir">Ôºã</button>
            </div>
          </div>
          <div class="sec-list" role="list"></div>
        </section>

        <section class="section bg-visitas tone" data-section="VISITAS AUDIO" data-tone="visitas">
          <div class="sec-head">
            <div>üìã VISITAS AUDIO</div>
            <div class="tools">
              <button class="sec-btn" data-act="toggle" title="Mostrar/Ocultar">‚ñæ</button>
              <button class="sec-btn" data-act="add" title="A√±adir">Ôºã</button>
            </div>
          </div>
          <div class="sec-list" role="list"></div>
        </section>

        <section class="section bg-formaciones tone" data-section="FORMACIONES Y MENTORING" data-tone="formaciones">
          <div class="sec-head">
            <div>üéì FORMACIONES Y MENTORING</div>
            <div class="tools">
              <button class="sec-btn" data-act="toggle" title="Mostrar/Ocultar">‚ñæ</button>
              <button class="sec-btn" data-act="add" title="A√±adir">Ôºã</button>
            </div>
          </div>
          <div class="sec-list" role="list"></div>
        </section>

        <section class="section bg-tele tone" data-section="TELEAUDIOLOGIA" data-tone="tele">
          <div class="sec-head">
            <div>üì° TELEAUDIOLOGIA</div>
            <div class="tools">
              <button class="sec-btn" data-act="toggle" title="Mostrar/Ocultar">‚ñæ</button>
              <button class="sec-btn" data-act="add" title="A√±adir">Ôºã</button>
            </div>
          </div>
          <div class="sec-list" role="list"></div>
        </section>
      </div>
    </aside>

    <!-- RIGHT -->
    <section class="col">
      <div id="detail" class="detail card">
        <div class="row">
          <h2 id="detTitle">Detalle</h2>
          <span id="detTag" class="badge">‚Äî</span>
        </div>
        <div class="hint" id="detHint">Selecciona un item a la izquierda o crea uno con Ôºã.</div>

        <div id="detForm" style="display:none">
          <div class="field">
            <label for="fNombre">Nombre</label>
            <input id="fNombre" type="text" placeholder="Ej.: Reina Mercedes" />
          </div>
          <div class="row">
            <div class="field" style="min-width:220px;flex:1">
              <label for="fFecha">Fecha</label>
              <input id="fFecha" type="date" />
            </div>
            <div class="field" style="min-width:220px;flex:1">
              <label for="fEstado">Estado</label>
              <input id="fEstado" type="text" placeholder="Ej.: En curso / Objetivo / Riesgo" />
            </div>
          </div>
          <div class="field">
            <label for="fNotas">Notas</label>
            <textarea id="fNotas" placeholder="Observaciones, pr√≥ximos pasos, KPIs‚Ä¶"></textarea>
          </div>
          <div class="bar-right">
            <button class="btn btn-ghost" id="btnCancel">Cancelar</button>
            <button class="btn btn-save" id="btnSave">üíæ Guardar cambios</button>
          </div>
        </div>
      </div>
    </section>
  </main>

<script>
/* ======= Estado & Datos ======= */
const STORAGE_KEY = 'audioseguimiento_v2';

const SECTION_ORDER = [
  "CENTROS EXCLUSIVOS",
  "CENTROS FLOP",
  "VISITAS AUDIO",
  "FORMACIONES Y MENTORING",
  "TELEAUDIOLOGIA"
];

const SECTION_TONE = {
  "CENTROS EXCLUSIVOS":"exclusivos",
  "CENTROS FLOP":"flop",
  "VISITAS AUDIO":"visitas",
  "FORMACIONES Y MENTORING":"formaciones",
  "TELEAUDIOLOGIA":"tele"
};

const TONE_BG = {
  exclusivos: 'var(--col-exclusivos)',
  flop: 'var(--col-flop)',
  visitas: 'var(--col-visitas)',
  formaciones: 'var(--col-formaciones)',
  tele: 'var(--col-tele)'
};

let state = {
  editing:true,
  selected:{ section:null, index:null }
};

let data = load() || {
  "CENTROS EXCLUSIVOS":[{nombre:"Reina Mercedes", fecha:"", estado:"", notas:""}],
  "CENTROS FLOP":[],
  "VISITAS AUDIO":[],
  "FORMACIONES Y MENTORING":[],
  "TELEAUDIOLOGIA":[]
};

/* ======= Util ======= */
function q(sel,root=document){ return root.querySelector(sel); }
function qa(sel,root=document){ return Array.from(root.querySelectorAll(sel)); }
function nowISO(){ return new Date().toISOString(); }
function save(){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
  q('#pillOk').style.display='inline-flex';
  q('#stamp').textContent = 'Actualizado: ' + nowISO();
}
function load(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    return raw? JSON.parse(raw): null;
  }catch(e){ return null; }
}
function setDetailTone(tone){
  const det = q('#detail');
  det.style.background = '#fff';
  det.style.borderColor = '#ececf5';
  if(tone && TONE_BG[tone]){
    det.style.background = TONE_BG[tone];
    det.style.borderColor = '#00000015';
  }
}
function renderAll(){
  // render listas
  SECTION_ORDER.forEach(sec=>{
    const wrap = q(`.section[data-section="${sec}"] .sec-list`);
    wrap.innerHTML='';
    const items = data[sec]||[];
    items.forEach((it,idx)=>{
      const el = document.createElement('div');
      el.className='item';
      el.dataset.section=sec; el.dataset.index=idx;
      el.innerHTML = `
        <div class="name">${it.nombre||'‚Äî'}</div>
        <div class="acts">
          <span class="ico" title="Editar">‚úèÔ∏è</span>
          <span class="ico" title="Eliminar">üóëÔ∏è</span>
        </div>`;
      wrap.appendChild(el);
    });
  });

  // estado topbar
  q('#lock').textContent = state.editing? 'üîì Editando' : 'üîí Bloqueado';
  q('#btnSaveTop').disabled = !state.editing;
  qa('.sec-btn,[data-act="add"],.item').forEach(el=>{
    el.disabled = !state.editing;
  });

  // detalle
  if(state.selected.section!=null){
    const sec = state.selected.section;
    const idx = state.selected.index;
    const item = data[sec][idx];
    q('#detTitle').textContent = 'Detalle';
    q('#detTag').textContent = sec;
    q('#detHint').style.display='none';
    q('#detForm').style.display='block';
    q('#fNombre').value = item.nombre||'';
    q('#fFecha').value = item.fecha||'';
    q('#fEstado').value = item.estado||'';
    q('#fNotas').value = item.notas||'';
    setDetailTone(SECTION_TONE[sec]);
  }else{
    q('#detTitle').textContent = 'Detalle';
    q('#detTag').textContent = '‚Äî';
    q('#detHint').style.display='block';
    q('#detForm').style.display='none';
    setDetailTone(null);
  }
}

/* ======= Eventos globales ======= */
q('#btnEdit').addEventListener('click',()=>{
  state.editing = !state.editing;
  renderAll();
});
q('#btnRefresh').addEventListener('click',()=>{
  data = load() || data;
  q('#pillOk').style.display='inline-flex';
  q('#stamp').textContent = 'Actualizado: ' + nowISO();
  renderAll();
});
q('#btnSaveTop').addEventListener('click',()=>{ save(); });

q('#btnAR').addEventListener('click',()=>{
  alert('Atajo AR listo ‚úÖ');
});

/* ======= Delegaci√≥n: secciones ======= */
qa('.section').forEach(secEl=>{
  const secName = secEl.dataset.section;

  // Toggle mostrar/ocultar
  q('[data-act="toggle"]',secEl).addEventListener('click',()=>{
    const lst = q('.sec-list',secEl);
    lst.style.display = (lst.style.display==='none') ? '' : 'none';
  });

  // A√±adir
  q('[data-act="add"]',secEl).addEventListener('click',()=>{
    if(secName === 'CENTROS EXCLUSIVOS' && (data[secName]?.length||0) >= 10){
      alert('M√°ximo 10 en CENTROS EXCLUSIVOS');
      return;
    }
    const nuevo = { nombre:'(nuevo)', fecha:'', estado:'', notas:'' };
    data[secName] = data[secName] || [];
    data[secName].push(nuevo);
    state.selected = { section:secName, index:data[secName].length-1 };
    save(); renderAll();
  });

  // Click en lista (editar/eliminar)
  q('.sec-list',secEl).addEventListener('click',(ev)=>{
    const itemEl = ev.target.closest('.item');
    if(!itemEl) return;
    const idx = +itemEl.dataset.index;

    if(ev.target.textContent.includes('üóëÔ∏è')){
      if(confirm('¬øEliminar este item?')){
        data[secName].splice(idx,1);
        state.selected = {section:null,index:null};
        save(); renderAll();
      }
      return;
    }
    // seleccionar para editar
    state.selected = { section:secName, index:idx };
    renderAll();
  });
});

/* ======= Detalle (form) ======= */
q('#btnSave').addEventListener('click',()=>{
  if(state.selected.section==null) return;
  const {section,index} = state.selected;
  const it = data[section][index];
  it.nombre = q('#fNombre').value.trim();
  it.fecha = q('#fFecha').value;
  it.estado = q('#fEstado').value.trim();
  it.notas = q('#fNotas').value.trim();
  save(); renderAll();
});
q('#btnCancel').addEventListener('click',()=>{
  state.selected = {section:null,index:null};
  renderAll();
});

/* ======= Init ======= */
(function init(){
  q('#stamp').textContent = 'Actualizado: ' + nowISO();
  renderAll();
})();
</script>
</body>
</html>
